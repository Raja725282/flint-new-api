<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Profile Report - 24 Arthur Street Woody Point QLD 4019</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css">
    <style>
        :root {
            --flint-purple: #7B2D8E;
            --flint-purple-dark: #6A2577;
            --flint-light-purple: #9B4DAE;
            --text-dark: #1F2937;
            --text-muted: #6B7280;
            --bg-light: #F9FAFB;
            --border-color: #E5E7EB;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body { 
            background: #fafafa !important; 
            font-family: 'Inter', sans-serif !important; 
            color: var(--text-dark) !important;
            margin: 0;
            padding: 0;
        }
        
        /* Remove custom container max-width to use Bootstrap defaults */
        
        .report-header { 
            background: #fff !important; 
            border-bottom: 1px solid var(--border-color) !important; 
            padding: 1.2rem 0 !important; 
            width: 100%;
        }
        
        .report-title { 
            font-size: 1.2rem !important; 
            color: var(--flint-purple) !important; 
            font-weight: 700 !important; 
            letter-spacing: 0.5px !important; 
        }
        
        .report-address { 
            font-size: 1.15rem !important; 
            color: var(--text-dark) !important; 
            font-weight: 600 !important; 
            margin-left: 1.5rem !important; 
        }
        
        .report-tabs { 
            background: #fff !important; 
            border-bottom: 1px solid var(--border-color) !important; 
            padding: 0 !important;
        }
        
        .report-tabs .nav-tabs {
            border-bottom: none !important;
            margin-bottom: 0 !important;
        }
        
        .report-tabs .nav-link { 
            color: var(--flint-purple) !important; 
            font-weight: 500 !important; 
            border: none !important; 
            border-bottom: 2px solid transparent !important; 
            border-radius: 0 !important; 
            transition: all 0.3s ease !important; 
            padding: 1rem 1.5rem !important;
        }
        
        .report-tabs .nav-link:hover {
            color: var(--flint-purple) !important;
            background: #f9f6fd !important;
        }
        
        .report-tabs .nav-link.active { 
            border-bottom: 3px solid var(--flint-purple) !important; 
            background: #f9f6fd !important; 
            color: var(--flint-purple) !important; 
        }
        
        .report-section { 
            margin-top: 2rem !important; 
        }
        
        .card { 
            border-radius: 16px !important; 
            box-shadow: 0 4px 20px rgba(123,45,142,0.1) !important; 
            border: none !important; 
            background: white !important;
            margin-bottom: 1.5rem !important;
            padding: 1.5rem !important;
        }
        
        .property-img { 
            width: 100% !important; 
            height: 280px !important; 
            object-fit: cover !important; 
            border-radius: 12px !important; 
        }
        
        .map-placeholder { 
            background: #f3f3f3 !important; 
            color: #aaa !important; 
            display: flex !important; 
            align-items: center !important; 
            justify-content: center !important; 
            height: 280px !important; 
            border-radius: 12px !important; 
            font-size: 1.2rem !important; 
            font-weight: 500 !important;
            position: relative !important;
        }
        
        .map-controls {
            position: absolute !important;
            top: 10px !important;
            right: 10px !important;
            display: flex !important;
            gap: 0.5rem !important;
            z-index: 1000 !important;
        }
        
        .map-btn {
            background: white !important;
            border: 1px solid var(--border-color) !important;
            border-radius: 6px !important;
            padding: 0.5rem 1rem !important;
            font-size: 0.85rem !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            font-weight: 500 !important;
        }
        
        .map-btn.active,
        .map-btn:hover {
            background: var(--flint-purple) !important;
            color: white !important;
            border-color: var(--flint-purple) !important;
        }
        
        .info-label { 
            color: var(--flint-purple) !important; 
            font-weight: 600 !important; 
            font-size: 1.05rem !important; 
            margin-bottom: 0.5rem !important;
        }
        
        .info-value { 
            color: var(--text-dark) !important; 
            font-weight: 500 !important; 
            font-size: 1.08rem !important; 
        }
        
        .copy-btn { 
            color: var(--flint-purple) !important; 
            cursor: pointer !important; 
            margin-left: 0.5rem !important; 
            font-size: 1.1rem !important; 
            transition: color 0.3s ease !important; 
        }
        
        .copy-btn:hover { 
            color: var(--flint-light-purple) !important; 
        }
        
        .est-value-bar { 
            height: 12px !important; 
            background: linear-gradient(90deg,#e0c3fc 0%, var(--flint-purple) 100%) !important; 
            border-radius: 6px !important; 
            margin: 1rem 0 !important; 
        }
        
        .est-value-labels { 
            display: flex !important; 
            justify-content: space-between !important; 
            font-size: 1rem !important; 
            color: var(--text-muted) !important; 
        }
        
        .insight-chart { 
            width: 100% !important; 
            height: 220px !important; 
            background: #f8f9fa !important; 
            border-radius: 12px !important; 
            margin-bottom: 1.5rem !important; 
            border: 1px solid var(--border-color) !important;
        }
        
        .insight-stats { 
            display: flex !important; 
            flex-wrap: wrap !important; 
            gap: 1.5rem !important; 
            margin-bottom: 2rem !important;
        }
        
        .insight-stat { 
            background: #fff !important; 
            border-radius: 12px !important; 
            padding: 1.5rem 1.5rem !important; 
            min-width: 140px !important; 
            text-align: center !important; 
            box-shadow: 0 3px 15px rgba(123,45,142,0.1) !important; 
            border: 1px solid var(--border-color) !important;
            flex: 1 !important;
        }
        
        .insight-stat .stat-label { 
            color: var(--text-muted) !important; 
            font-size: 0.95rem !important; 
            margin-bottom: 0.5rem !important;
            font-weight: 500 !important;
        }
        
        .insight-stat .stat-value { 
            color: var(--flint-purple) !important; 
            font-weight: 700 !important; 
            font-size: 1.3rem !important; 
            display: block !important;
        }
        
        .section-title { 
            font-size: 1.3rem !important; 
            color: var(--flint-purple) !important; 
            font-weight: 700 !important; 
            margin-bottom: 1.5rem !important; 
            letter-spacing: 0.3px !important; 
            border-bottom: 2px solid var(--flint-purple) !important;
            padding-bottom: 0.5rem !important;
        }
        
        .comparable-item { 
            border-left: 4px solid var(--flint-purple) !important; 
            padding-left: 1.5rem !important; 
            margin-bottom: 1.5rem !important; 
            background: white !important;
            padding: 1rem 1.5rem !important;
            border-radius: 8px !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05) !important;
        }
        
        .school-item { 
            border: 1px solid var(--border-color) !important; 
            border-radius: 12px !important; 
            padding: 1.5rem !important; 
            margin-bottom: 1.5rem !important; 
            background: white !important; 
            box-shadow: 0 3px 15px rgba(123,45,142,0.08) !important;
            transition: transform 0.3s ease !important;
        }
        
        .school-item:hover {
            transform: translateY(-2px) !important;
        }
        
        .school-rating { 
            background: var(--flint-purple) !important; 
            color: white !important; 
            padding: 0.4rem 0.8rem !important; 
            border-radius: 6px !important; 
            font-size: 0.9rem !important; 
            font-weight: 600 !important; 
            display: inline-block !important;
        }
        
        .tab-content {
            background: transparent !important;
        }
        
        .tab-pane {
            background: transparent !important;
        }
        
        /* Carousel Styles */
        .carousel-item img {
            height: 280px !important;
            object-fit: cover !important;
            border-radius: 12px !important;
        }
        
        /* Enhanced Responsive Design */
        
        /* Header and Navigation Responsive Improvements */
        .report-header { 
            background: #fff !important; 
            border-bottom: 1px solid var(--border-color) !important; 
            padding: 1.2rem 0 !important; 
            width: 100%;
        }
        
        .report-title { 
            font-size: 1.2rem !important; 
            color: var(--flint-purple) !important; 
            font-weight: 700 !important; 
            letter-spacing: 0.5px !important; 
            line-height: 1.3 !important;
        }
        
        .report-address {
            font-size: 1rem !important;
            color: var(--text-muted) !important;
            margin-left: 1rem !important;
            line-height: 1.4 !important;
            word-break: break-word !important;
        }
        
        .footer-logo {
            font-size: 0.95rem !important;
            color: var(--text-muted) !important;
            display: flex !important;
            align-items: center !important;
        }
        
        .report-tabs {
            background: #fff !important;
            border-bottom: 1px solid var(--border-color) !important;
            padding: 0 !important;
        }
        
        .nav-tabs {
            border-bottom: 2px solid #e5e7eb !important;
            overflow-x: auto !important;
            overflow-y: hidden !important;
            white-space: nowrap !important;
            -webkit-overflow-scrolling: touch !important;
            scrollbar-width: none !important;
            -ms-overflow-style: none !important;
        }
        
        .nav-tabs::-webkit-scrollbar {
            display: none !important;
        }
        
        .nav-tabs .nav-item {
            flex-shrink: 0 !important;
        }
        
        .nav-tabs .nav-link {
            border: none !important;
            color: var(--flint-purple) !important;
            font-weight: 500 !important;
            padding: 1rem 1.5rem !important;
            background: transparent !important;
            border-radius: 0 !important;
            transition: background 0.2s !important;
            white-space: nowrap !important;
            font-size: 0.95rem !important;
        }
        
        .nav-tabs .nav-link.active {
            color: var(--flint-purple) !important;
            border-bottom: 3px solid var(--flint-purple) !important;
            background: #f9f6fd !important;
        }
        
        /* Touch Target Improvements */
        .btn, .nav-link, button {
            min-height: 44px !important;
            min-width: 44px !important;
        }
        
        /* Form Elements */
        .form-control, .form-select {
            min-height: 44px !important;
            font-size: 16px !important; /* Prevents zoom on iOS */
        }
        
        /* Map Controls Responsive */
        .map-controls {
            position: absolute !important;
            top: 10px !important;
            right: 10px !important;
            z-index: 1000 !important;
            background: white !important;
            border-radius: 8px !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
            display: flex !important;
            flex-wrap: wrap !important;
        }
        
        .map-btn {
            border: none !important;
            background: transparent !important;
            padding: 6px 10px !important;
            color: var(--flint-purple) !important;
            font-size: 0.8rem !important;
        }
        
        .map-btn.active {
            color: var(--flint-purple-dark) !important;
            font-weight: 600 !important;
        }
        
        @media (max-width: 1199px) {
            .report-header {
                padding: 1rem 0 !important;
            }
            .report-title {
                font-size: 1.1rem !important;
            }
            .report-address {
                font-size: 0.95rem !important;
                margin-left: 0.8rem !important;
            }
            .nav-tabs .nav-link {
                padding: 0.8rem 1.2rem !important;
                font-size: 0.9rem !important;
            }
            .container {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }
        }
        
        @media (max-width: 991px) {
            .report-header {
                padding: 0.9rem 0 !important;
            }
            .report-title {
                font-size: 1rem !important;
            }
            .report-address {
                font-size: 0.9rem !important;
                margin-left: 0.6rem !important;
            }
            .nav-tabs .nav-link {
                padding: 0.7rem 1rem !important;
                font-size: 0.85rem !important;
            }
            .footer-logo {
                font-size: 0.85rem !important;
            }
            .report-title {
                font-size: 1.1rem !important;
            }
            
            .report-address {
                font-size: 1rem !important;
            }
            
            .property-img,
            .map-placeholder,
            .carousel-item img {
                height: 220px !important;
            }
            
            .card {
                margin-bottom: 1rem !important;
                padding: 1.2rem !important;
            }
            
            .section-title {
                font-size: 1.3rem !important;
                margin-bottom: 1rem !important;
            }
        }
        
        @media (max-width: 768px) {
            .report-header {
                padding: 0.8rem 0 !important;
            }
            
            .report-title {
                font-size: 1rem !important;
                line-height: 1.4 !important;
            }
            
            .report-address {
                font-size: 0.9rem !important;
                margin-left: 0 !important;
                margin-top: 0.5rem !important;
                display: block !important;
                line-height: 1.3 !important;
            }
            
            .nav-tabs .nav-link {
                padding: 0.6rem 0.8rem !important;
                font-size: 0.8rem !important;
            }
            
            .container {
                padding-left: 0.75rem !important;
                padding-right: 0.75rem !important;
            }
            
            .d-flex.justify-content-between {
                flex-direction: column !important;
                align-items: flex-start !important;
                gap: 0.5rem !important;
            }
            
            .footer-logo {
                font-size: 0.8rem !important;
                align-self: flex-end !important;
            }
            
            /* Stack header elements properly on mobile */
            .d-flex.align-items-center.flex-wrap {
                flex-direction: column !important;
                align-items: flex-start !important;
            }
            
            .property-img,
            .map-placeholder,
            .carousel-item img {
                height: 200px !important;
            }
            
            .insight-stats {
                gap: 0.8rem !important;
                flex-wrap: wrap !important;
                justify-content: center !important;
            }
            
            .insight-stat {
                min-width: 120px !important;
                padding: 0.8rem !important;
                flex: 1 1 calc(50% - 0.4rem) !important;
                margin-bottom: 0.5rem !important;
            }
            
            .section-title {
                font-size: 1.2rem !important;
                margin-bottom: 0.8rem !important;
            }
            
            .card {
                padding: 1rem !important;
                margin-bottom: 0.8rem !important;
                border-radius: 8px !important;
            }
            
            .container {
                padding-left: 0.75rem !important;
                padding-right: 0.75rem !important;
            }
            
            .d-flex.justify-content-between {
                flex-direction: column !important;
                align-items: flex-start !important;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100% !important;
                margin-bottom: 0.5rem !important;
                min-height: 44px !important;
            }
            
            .row.g-4 {
                gap: 0.75rem !important;
            }
        }
        
        @media (max-width: 576px) {
            .report-header {
                padding: 0.6rem 0 !important;
            }
            
            .report-title {
                font-size: 0.95rem !important;
                line-height: 1.3 !important;
            }
            
            .report-address {
                font-size: 0.85rem !important;
                line-height: 1.2 !important;
                margin-top: 0.4rem !important;
            }
            
            .nav-tabs .nav-link {
                padding: 0.5rem 0.6rem !important;
                font-size: 0.75rem !important;
            }
            
            .container {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
            
            .footer-logo {
                font-size: 0.75rem !important;
            }
            
            /* Better spacing for small screens */
            .d-flex.align-items-center {
                margin-bottom: 0.3rem !important;
            }
            
            .property-img,
            .map-placeholder,
            .carousel-item img {
                height: 160px !important;
                border-radius: 8px !important;
            }
            
            .insight-stats {
                gap: 0.5rem !important;
            }
            
            .insight-stat {
                min-width: 100px !important;
                padding: 0.6rem !important;
                font-size: 0.85rem !important;
                flex: 1 1 100% !important;
            }
            
            .section-title {
                font-size: 1.1rem !important;
                margin-bottom: 0.6rem !important;
            }
            
            .card {
                padding: 0.8rem !important;
                margin-bottom: 0.6rem !important;
                border-radius: 6px !important;
            }
            
            .container {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
            
            .navbar {
                padding: 0.5rem 0.75rem !important;
            }
            
            .flint-logo {
                font-size: 1.2rem !important;
            }
            
            .cotality-badge {
                font-size: 0.7rem !important;
                padding: 0.2rem 0.5rem !important;
            }
            
            .footer-logo {
                font-size: 0.8rem !important;
            }
            
            .footer-logo img {
                height: 14px !important;
            }
            
            .btn {
                padding: 10px 15px !important;
                font-size: 0.9rem !important;
            }
            
            .row.g-4 {
                gap: 0.5rem !important;
            }
            
            .col-lg-8, .col-lg-4, .col-md-6, .col-md-4 {
                padding-left: 0.25rem !important;
                padding-right: 0.25rem !important;
            }
        }
        
        @media (max-width: 400px) {
            .report-header {
                padding: 0.5rem 0 !important;
            }
            
            .report-title {
                font-size: 0.9rem !important;
            }
            
            .report-address {
                font-size: 0.8rem !important;
            }
            
            .property-img,
            .map-placeholder,
            .carousel-item img {
                height: 140px !important;
            }
            
            .card {
                padding: 0.6rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .container {
                padding-left: 0.25rem !important;
                padding-right: 0.25rem !important;
            }
            
            .section-title {
                font-size: 1rem !important;
            }
            
            .insight-stat {
                padding: 0.5rem !important;
                font-size: 0.8rem !important;
            }
        }
            
            .insight-stat {
                min-width: 80px !important;
                padding: 0.8rem !important;
            }
            
            .nav-tabs .nav-link {
                padding: 0.5rem 0.75rem !important;
                font-size: 0.9rem !important;
            }
            
            .section-title {
                font-size: 1.1rem !important;
            }
        }
        
        /* Footer Styles */
        .no-data { 
            color: #aaa !important; 
            font-size: 1.1rem !important; 
            text-align: center !important; 
            padding: 2rem 0 !important; 
        }
        
        .footer-info { 
            background: #fff !important; 
            border-top: 1px solid var(--border-color) !important; 
            font-size: 1rem !important; 
            color: #444 !important; 
            padding: 1.5rem 0 0.7rem 0 !important; 
            margin-top: 2rem !important;
        }
        
        .footer-logo { 
            float: right !important; 
            color: var(--flint-purple) !important; 
            font-weight: 700 !important; 
            font-size: 1.2rem !important; 
        }
        
        .footer-logo img { 
            height: 22px !important; 
            margin-right: 0.5rem !important; 
        }
        
        .important-info { 
            font-size: 1rem !important; 
            color: var(--text-muted) !important; 
            margin-top: 1.5rem !important; 
            font-weight: 600 !important;
        }
        
        .read-more { 
            color: var(--flint-purple) !important; 
            font-size: 1rem !important; 
            cursor: pointer !important; 
            text-decoration: underline !important; 
        }
        
        .read-more:hover {
            color: var(--flint-purple-dark) !important;
        }
        
        /* Loading spinner animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-spinner {
            color: var(--flint-purple) !important;
            font-weight: 500 !important;
        }
    </style>
</head>
<body>
    <div class="report-header">
        <div class="container">
            <div class="d-flex align-items-center justify-content-between flex-wrap">
                <div class="d-flex align-items-center flex-wrap">
                    <span class="report-title">Property Profile Report</span>
                    <span class="report-address d-none d-md-inline">AUSTRALIA/24 Arthur Street Woody Point QLD 4019</span>
                </div>
                <!-- Mobile: Show address below title -->
                <div class="w-100 d-md-none mt-2">
                    <span class="report-address">AUSTRALIA/24 Arthur Street Woody Point QLD 4019</span>
                </div>
                <div class="d-flex align-items-center flex-wrap">
                    <span class="me-2 me-md-3 d-none d-sm-inline" style="font-size:0.85rem;color:#888;">Report Generated on 13 Aug 2025</span>
                    <div class="d-flex align-items-center">
                        <span class="footer-logo">
                            <img src="logo.png" alt="Flint Logo" style="height:18px;margin-right:4px;">
                        </span>
                        <img src="CotalityEarth.png" alt="CotalityEarth" style="height:16px;margin-left:8px;">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="report-tabs">
        <div class="container">
            <ul class="nav nav-tabs" id="reportTabs">
                <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#photos">Photos</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#location">Location</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#details">Details</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#value">Value</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#history">History</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#insights">Insights</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#comparables">Compare</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#schools">Schools</a></li>
            </ul>
        </div>
    </div>
    <div class="container report-section">
        <div class="tab-content" id="reportTabContent">
            <!-- Photos Tab -->
            <div class="tab-pane fade show active" id="photos">
                <div class="row g-3 g-lg-4">
                    <div class="col-12 col-lg-6">
                        <div class="card p-2 p-md-3 mb-3">
                            <div id="propertyCarousel" class="carousel slide" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80" class="property-img d-block w-100" alt="Property Front View">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80" class="property-img d-block w-100" alt="Property Interior">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&auto=format&fit=crop&w=2074&q=80" class="property-img d-block w-100" alt="Property Kitchen">
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#propertyCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#propertyCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                </button>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <span class="badge bg-light text-dark">3 Photos</span>
                                <span class="text-muted" style="font-size:0.95rem;">© cotality</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="card p-2 p-md-3 mb-3">
                            <h6 class="section-title mb-3">Location Map</h6>
                            <div class="position-relative">
                                <div id="propertyMap" class="map-placeholder"></div>
                                <div class="map-controls">
                                    <button class="map-btn active" data-view="map">Map</button>
                                    <button class="map-btn" data-view="satellite">Satellite</button>
                                    <button class="map-btn" data-view="hybrid">Hybrid</button>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <span class="badge bg-light text-dark">Interactive Map</span>
                                <span class="text-muted" style="font-size:0.95rem;">© OpenStreetMap</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Location Tab -->
            <div class="tab-pane fade" id="location">
                <div class="row g-4">
                    <div class="col-12">
                        <div class="card p-3">
                            <h5 class="section-title">Location Details</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <span class="info-label">Suburb</span><br>
                                        <span class="info-value">Woody Point</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="info-label">Postcode</span><br>
                                        <span class="info-value">4019</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="info-label">Distance to CBD</span><br>
                                        <span class="info-value">28 km</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <span class="info-label">Transport</span><br>
                                        <span class="info-value">Bus, Train nearby</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="info-label">Shopping</span><br>
                                        <span class="info-value">Westfield Redcliffe 2.1km</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="info-label">Schools</span><br>
                                        <span class="info-value">5 schools within 2km</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Property Details Tab -->
            <div class="tab-pane fade" id="details">
                <div class="row g-3 g-lg-4">
                    <div class="col-12 col-lg-6">
                        <div class="card p-2 p-md-3">
                            <h5 class="section-title">Property Features</h5>
                            <div class="row">
                                <div class="col-6 mb-3">
                                    <span class="info-label">Bedrooms</span><br>
                                    <span class="info-value"><i class="bi bi-house-door me-2"></i>2</span>
                                </div>
                                <div class="col-6 mb-3">
                                    <span class="info-label">Bathrooms</span><br>
                                    <span class="info-value"><i class="bi bi-droplet me-2"></i>2</span>
                                </div>
                                <div class="col-6 mb-3">
                                    <span class="info-label">Car Spaces</span><br>
                                    <span class="info-value"><i class="bi bi-car-front me-2"></i>1</span>
                                </div>
                                <div class="col-6 mb-3">
                                    <span class="info-label">Floor Area</span><br>
                                    <span class="info-value"><i class="bi bi-bounding-box me-2"></i>102m²</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="card p-2 p-md-3">
                            <h5 class="section-title">Additional Information</h5>
                            <div class="mb-3">
                                <span class="info-label">Air Conditioning</span><br>
                                <span class="info-value">Split System</span>
                            </div>
                            <div class="mb-3">
                                <span class="info-label">Balcony</span><br>
                                <span class="info-value">Yes - Ocean Views</span>
                            </div>
                            <div class="mb-3">
                                <span class="info-label">Built-in Wardrobes</span><br>
                                <span class="info-value">Yes</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Estimated Value Tab -->
            <div class="tab-pane fade" id="value">
                <div class="row g-3 g-lg-4">
                    <div class="col-12">
                        <div class="card p-2 p-md-3">
                            <h5 class="section-title">Current Market Analysis</h5>
                            <div class="row g-3">
                                <div class="col-12 col-lg-8">
                                    <div class="mb-3">
                                        <span class="badge bg-warning text-dark mb-2">Medium Confidence</span>
                                        <div class="est-value-bar"></div>
                                        <div class="est-value-labels">
                                            <span>$800K</span>
                                            <span class="fw-bold">$850K</span>
                                            <span>$900K</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="insight-stat">
                                                <div class="stat-label">Estimated Value</div>
                                                <div class="stat-value">$850K</div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="insight-stat">
                                                <div class="stat-label">Price per m²</div>
                                                <div class="stat-value">$8,333</div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="insight-stat">
                                                <div class="stat-label">Rental Estimate</div>
                                                <div class="stat-value">$520/week</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Property History Tab -->
            <div class="tab-pane fade" id="history">
                <div class="row g-4">
                    <div class="col-12">
                        <div class="card p-3">
                            <h5 class="section-title">Sales & Rental History</h5>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Type</th>
                                            <th>Price</th>
                                            <th>Days on Market</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Mar 2023</td>
                                            <td><span class="badge bg-success">Sale</span></td>
                                            <td>$785,000</td>
                                            <td>45 days</td>
                                        </tr>
                                        <tr>
                                            <td>Jan 2021</td>
                                            <td><span class="badge bg-info">Rental</span></td>
                                            <td>$480/week</td>
                                            <td>12 days</td>
                                        </tr>
                                        <tr>
                                            <td>Sep 2019</td>
                                            <td><span class="badge bg-success">Sale</span></td>
                                            <td>$650,000</td>
                                            <td>28 days</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Insights Tab -->
            <div class="tab-pane fade" id="insights">
                <div class="row g-4">
                    <div class="col-12">
                        <div class="card p-3">
                            <h5 class="section-title">Woody Point Market Insights</h5>
                            <div class="row mb-3">
                                <div class="col-auto">
                                    <button class="btn btn-primary btn-sm">1 Year</button>
                                    <button class="btn btn-outline-secondary btn-sm">3 Years</button>
                                    <button class="btn btn-outline-secondary btn-sm">5 Years</button>
                                </div>
                            </div>
                            
                            <!-- Dummy Chart -->
                            <div class="insight-chart mb-3 position-relative">
                                <canvas id="priceChart" style="width: 100%; height: 190px;"></canvas>
                            </div>
                            
                            <div class="insight-stats">
                                <div class="insight-stat">
                                    <div class="stat-label">Median Value</div>
                                    <div class="stat-value">$782K</div>
                                    <div class="stat-label text-success">↑ 7.3%</div>
                                </div>
                                <div class="insight-stat">
                                    <div class="stat-label">Days on Market</div>
                                    <div class="stat-value">27 Days</div>
                                    <div class="stat-label text-primary">↓ 10.7%</div>
                                </div>
                                <div class="insight-stat">
                                    <div class="stat-label">Properties Sold</div>
                                    <div class="stat-value">53</div>
                                    <div class="stat-label text-secondary">↓ 3.2%</div>
                                </div>
                                <div class="insight-stat">
                                    <div class="stat-label">Vendor Discount</div>
                                    <div class="stat-value">-3.12%</div>
                                    <div class="stat-label text-warning">Average</div>
                                </div>
                                <div class="insight-stat">
                                    <div class="stat-label">Median Rent</div>
                                    <div class="stat-value">$565/W</div>
                                    <div class="stat-label text-primary">↑ 2.7%</div>
                                </div>
                                <div class="insight-stat">
                                    <div class="stat-label">Rental Yield</div>
                                    <div class="stat-value">3.94%</div>
                                    <div class="stat-label text-secondary">↑ 3.8%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Comparables Tab -->
            <div class="tab-pane fade" id="comparables">
                <div class="row g-4">
                    <div class="col-12">
                        <div class="card p-3">
                            <h5 class="section-title">Comparable Properties</h5>
                            <div class="row mb-3">
                                <div class="col-auto">
                                    <button class="btn btn-primary btn-sm">Recently Sold</button>
                                    <button class="btn btn-outline-secondary btn-sm">For Sale</button>
                                    <button class="btn btn-outline-secondary btn-sm">For Rent</button>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" class="card-img-top" style="height: 150px; object-fit: cover;" alt="Comparable 1">
                                        <div class="card-body p-3">
                                            <h6 class="card-title">18 Marine Parade</h6>
                                            <p class="card-text small text-muted">Woody Point QLD 4019</p>
                                            <div class="d-flex justify-content-between">
                                                <span class="text-success fw-bold">$795,000</span>
                                                <span class="text-muted">2 bed, 2 bath</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <img src="https://images.unsplash.com/photo-1613490493576-7fde63acd811?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" class="card-img-top" style="height: 150px; object-fit: cover;" alt="Comparable 2">
                                        <div class="card-body p-3">
                                            <h6 class="card-title">35 Bayview Terrace</h6>
                                            <p class="card-text small text-muted">Clontarf QLD 4019</p>
                                            <div class="d-flex justify-content-between">
                                                <span class="text-success fw-bold">$820,000</span>
                                                <span class="text-muted">2 bed, 1 bath</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" class="card-img-top" style="height: 150px; object-fit: cover;" alt="Comparable 3">
                                        <div class="card-body p-3">
                                            <h6 class="card-title">42 Ocean Drive</h6>
                                            <p class="card-text small text-muted">Redcliffe QLD 4020</p>
                                            <div class="d-flex justify-content-between">
                                                <span class="text-success fw-bold">$765,000</span>
                                                <span class="text-muted">2 bed, 2 bath</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Local Schools Tab -->
            <div class="tab-pane fade" id="schools">
                <div class="row g-4">
                    <div class="col-12">
                        <div class="card p-3">
                            <h5 class="section-title">Nearby Schools</h5>
                            <div class="row mb-3">
                                <div class="col-auto">
                                    <button class="btn btn-primary btn-sm">In Catchment</button>
                                    <button class="btn btn-outline-secondary btn-sm">All Nearby</button>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h6 class="card-title">Woody Point State School</h6>
                                            <p class="card-text">
                                                <span class="badge bg-primary me-2">Primary</span>
                                                <span class="text-muted">0.8 km away</span>
                                            </p>
                                            <div class="row">
                                                <div class="col-6">
                                                    <small class="text-muted">ICSEA Score</small><br>
                                                    <span class="fw-bold">1045</span>
                                                </div>
                                                <div class="col-6">
                                                    <small class="text-muted">Students</small><br>
                                                    <span class="fw-bold">420</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h6 class="card-title">Redcliffe State High School</h6>
                                            <p class="card-text">
                                                <span class="badge bg-success me-2">Secondary</span>
                                                <span class="text-muted">2.1 km away</span>
                                            </p>
                                            <div class="row">
                                                <div class="col-6">
                                                    <small class="text-muted">ICSEA Score</small><br>
                                                    <span class="fw-bold">998</span>
                                                </div>
                                                <div class="col-6">
                                                    <small class="text-muted">Students</small><br>
                                                    <span class="fw-bold">1,200</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h6 class="card-title">Sacred Heart Primary</h6>
                                            <p class="card-text">
                                                <span class="badge bg-warning text-dark me-2">Catholic</span>
                                                <span class="text-muted">1.5 km away</span>
                                            </p>
                                            <div class="row">
                                                <div class="col-6">
                                                    <small class="text-muted">ICSEA Score</small><br>
                                                    <span class="fw-bold">1120</span>
                                                </div>
                                                <div class="col-6">
                                                    <small class="text-muted">Students</small><br>
                                                    <span class="fw-bold">280</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h6 class="card-title">Grace Lutheran College</h6>
                                            <p class="card-text">
                                                <span class="badge bg-info me-2">Private</span>
                                                <span class="text-muted">3.2 km away</span>
                                            </p>
                                            <div class="row">
                                                <div class="col-6">
                                                    <small class="text-muted">ICSEA Score</small><br>
                                                    <span class="fw-bold">1180</span>
                                                </div>
                                                <div class="col-6">
                                                    <small class="text-muted">Students</small><br>
                                                    <span class="fw-bold">950</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-info mt-4">
        <div class="container">
            <div class="important-info">IMPORTANT INFORMATION <i class="bi bi-chevron-down"></i></div>
            <div class="mt-2">If you have any questions or concerns about the information in this report, please contact our customer care team at customercare@cotality.com</div>
            <div class="mt-3" style="font-size:0.98rem; color:#222;">AUSTRALI/24 Arthur Street Woody Point QLD 4019</div>
            <div class="mt-2" style="font-size:0.85rem; color:#888;">© Copyright 2025. IP Data Pty Ltd trading as Cotality, All rights reserved. No reproduction, distribution, or transmission of the copyrighted material is permitted. The information is deemed reliable but not guaranteed.</div>
            <div class="footer-logo mt-2">
                <img src="logo.png" alt="Flint Logo" style="height:16px;margin-right:4px;">
                <img src="CotalityEarth.png" alt="CotalityEarth" style="height:14px;margin-right:4px;">
                cotality Property Profile Report
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="property-api-mysql-client.js"></script>
    
    <script>
        $(document).ready(function() {
            // Initialize map immediately since it's in the Photos tab (active by default)
            setTimeout(initMap, 500);
            
            // Load property data from API
            loadPropertyData();
            
            // Copy address to clipboard
            $(document).on('click', '.copy-btn', function() {
                const text = 'AUSTRALIA/24 Arthur Street Woody Point QLD 4019';
                navigator.clipboard.writeText(text).then(() => {
                    $(this).html('<i class="bi bi-check"></i> Copied!');
                    setTimeout(() => { 
                        $(this).html('<i class="bi bi-clipboard"></i> Copy'); 
                    }, 1200);
                });
            });

            // Initialize chart when insights tab is shown
            $('a[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
                if (e.target.getAttribute('href') === '#insights') {
                    initPriceChart();
                }
            });

            // Period buttons functionality
            $(document).on('click', '.btn-outline-secondary', function() {
                $(this).siblings().removeClass('btn-primary').addClass('btn-outline-secondary');
                $(this).removeClass('btn-outline-secondary').addClass('btn-primary');
            });
        });

        function initPriceChart() {
            const ctx = document.getElementById('priceChart');
            if (ctx && !ctx.chart) {
                // Use data from API if available, otherwise use default
                const chartData = window.chartData || [
                    { period: "Aug 22", value: 720 },
                    { period: "Nov 22", value: 735 },
                    { period: "Feb 23", value: 750 },
                    { period: "May 23", value: 760 },
                    { period: "Aug 23", value: 770 },
                    { period: "Nov 23", value: 775 },
                    { period: "Feb 24", value: 778 },
                    { period: "May 24", value: 780 },
                    { period: "Aug 24", value: 782 }
                ];
                
                ctx.chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: chartData.map(item => item.period),
                        datasets: [{
                            label: 'Median Value',
                            data: chartData.map(item => item.value),
                            borderColor: '#7B2D8E',
                            backgroundColor: 'rgba(123, 45, 142, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value + 'K';
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Initialize map function
            function initMap() {
                if (document.getElementById('propertyMap') && !window.propertyMapInstance) {
                    // Property coordinates for 24 Arthur Street Woody Point QLD 4019
                    const propertyLat = -27.2619;
                    const propertyLng = 153.1093;
                    
                    // Initialize map
                    window.propertyMapInstance = L.map('propertyMap').setView([propertyLat, propertyLng], 16);
                    
                    // Add tile layer
                    const osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '© OpenStreetMap contributors'
                    });
                    
                    const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                        attribution: '© Esri, Maxar, Earthstar Geographics'
                    });
                    
                    const hybridLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                        attribution: '© Esri, Maxar, Earthstar Geographics'
                    });
                    
                    // Add default layer
                    osmLayer.addTo(window.propertyMapInstance);
                    
                    // Add property marker
                    const propertyIcon = L.divIcon({
                        className: 'custom-marker',
                        html: '<div style="background: #7B2D8E; color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; font-weight: bold; text-align: center; border: 2px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"><i class="bi bi-house-door"></i> Property</div>',
                        iconSize: [80, 30],
                        iconAnchor: [40, 30]
                    });
                    
                    L.marker([propertyLat, propertyLng], {icon: propertyIcon})
                        .addTo(window.propertyMapInstance)
                        .bindPopup('<div style="text-align: center;"><strong>24 Arthur Street</strong><br>Woody Point QLD 4019</div>');
                    
                    // Map control buttons
                    $('.map-btn').on('click', function() {
                        $('.map-btn').removeClass('active');
                        $(this).addClass('active');
                        
                        const view = $(this).data('view');
                        window.propertyMapInstance.eachLayer(function(layer) {
                            if (layer instanceof L.TileLayer) {
                                window.propertyMapInstance.removeLayer(layer);
                            }
                        });
                        
                        if (view === 'satellite' || view === 'hybrid') {
                            satelliteLayer.addTo(window.propertyMapInstance);
                        } else {
                            osmLayer.addTo(window.propertyMapInstance);
                        }
                    });
                }
            }
            
            // Load property data from API
            async function loadPropertyData() {
                try {
                    // Show loading state
                    showLoadingState();
                    
                    // Load all data
                    const [propertyData, photos, estimatedValue, priceHistory, insights, comparables, schools] = await Promise.all([
                        window.PropertyAPI.getPropertyInfo(),
                        window.PropertyAPI.getPropertyPhotos(),
                        window.PropertyAPI.getEstimatedValue(),
                        window.PropertyAPI.getPriceHistory(),
                        window.PropertyAPI.getMarketInsights(),
                        window.PropertyAPI.getComparables(),
                        window.PropertyAPI.getLocalSchools()
                    ]);
                    
                    // Update UI with loaded data
                    updatePropertyInfo(propertyData.data);
                    updatePhotos(photos.data);
                    updateEstimatedValue(estimatedValue.data);
                    updatePriceHistory(priceHistory.data);
                    updateInsights(insights.data);
                    updateComparables(comparables.data);
                    updateSchools(schools.data);
                    
                    // Hide loading state
                    hideLoadingState();
                    
                } catch (error) {
                    console.error('Error loading property data:', error);
                    showErrorState();
                }
            }
            
            function showLoadingState() {
                // Add loading spinners to content areas
                $('.card').append('<div class="loading-spinner text-center p-3"><i class="bi bi-arrow-clockwise" style="animation: spin 1s linear infinite;"></i> Loading...</div>');
            }
            
            function hideLoadingState() {
                $('.loading-spinner').remove();
            }
            
            function showErrorState() {
                $('.loading-spinner').html('<div class="text-danger"><i class="bi bi-exclamation-triangle"></i> Error loading data</div>');
            }
            
            function updatePropertyInfo(data) {
                // Update header address
                $('.report-address').text(data.property.address);
                
                // Update location details
                $('#location .info-value').eq(0).text(data.location.suburb);
                $('#location .info-value').eq(1).text(data.location.postcode);
                $('#location .info-value').eq(2).text(data.location.distanceToCBD);
                $('#location .info-value').eq(3).text(data.location.transport);
                $('#location .info-value').eq(4).text(data.location.shopping);
                $('#location .info-value').eq(5).text(data.location.schools);
                
                // Update property details
                $('#details .info-value').eq(0).html(`<i class="bi bi-house-door me-2"></i>${data.property.bedrooms}`);
                $('#details .info-value').eq(1).html(`<i class="bi bi-droplet me-2"></i>${data.property.bathrooms}`);
                $('#details .info-value').eq(2).html(`<i class="bi bi-car-front me-2"></i>${data.property.carSpaces}`);
                $('#details .info-value').eq(3).html(`<i class="bi bi-rulers me-2"></i>${data.property.floorArea}`);
                $('#details .info-value').eq(4).html(`<i class="bi bi-building me-2"></i>${data.property.type}`);
                $('#details .info-value').eq(5).html(`<i class="bi bi-calendar me-2"></i>${data.property.yearBuilt}`);
            }
            
            function updatePhotos(photos) {
                const carousel = $('#propertyCarousel .carousel-inner');
                carousel.empty();
                
                photos.forEach((photo, index) => {
                    const activeClass = index === 0 ? ' active' : '';
                    carousel.append(`
                        <div class="carousel-item${activeClass}">
                            <img src="${photo.url}" class="property-img d-block w-100" alt="${photo.title}">
                        </div>
                    `);
                });
                
                $('.badge').first().text(`${photos.length} Photos`);
            }
            
            function updateEstimatedValue(data) {
                const valueSection = $('#value');
                valueSection.find('.card').html(`
                    <h5 class="section-title">Estimated Value</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-4">
                                <h3 class="text-success">${window.PropertyAPI.formatCurrency(data.current)}</h3>
                                <p class="text-muted">Current Estimated Value</p>
                            </div>
                            <div class="est-value-bar"></div>
                            <div class="est-value-labels">
                                <span>${window.PropertyAPI.formatCurrency(data.low)}</span>
                                <span>${window.PropertyAPI.formatCurrency(data.high)}</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <span class="info-label">Confidence Level</span><br>
                                <span class="info-value">${data.confidence}</span>
                            </div>
                            <div class="mb-3">
                                <span class="info-label">Price per sqm</span><br>
                                <span class="info-value">$${data.pricePerSqm.toLocaleString()}</span>
                            </div>
                            <div class="mb-3">
                                <span class="info-label">Estimated Rent (Weekly)</span><br>
                                <span class="info-value">$${data.estimatedRent.weekly}</span>
                            </div>
                            <div class="mb-3">
                                <span class="info-label">Rental Yield</span><br>
                                <span class="info-value">${data.yieldEstimate}</span>
                            </div>
                        </div>
                    </div>
                `);
            }
            
            function updatePriceHistory(history) {
                const historySection = $('#history');
                const historyHtml = history.map(item => `
                    <div class="mb-3 p-3" style="border-left: 3px solid var(--flint-purple); background: #f9f6fd;">
                        <div class="d-flex justify-content-between">
                            <strong>${window.PropertyAPI.formatCurrency(item.price)}</strong>
                            <span class="text-muted">${new Date(item.date).toLocaleDateString()}</span>
                        </div>
                        <small class="text-muted">${item.source}</small>
                    </div>
                `).join('');
                
                historySection.find('.card').html(`
                    <h5 class="section-title">Sale History</h5>
                    ${historyHtml}
                `);
            }
            
            function updateInsights(data) {
                const insightsSection = $('#insights');
                insightsSection.find('.card').html(`
                    <h5 class="section-title">Market Insights</h5>
                    <div class="insight-stats">
                        <div class="insight-stat">
                            <div class="stat-label">Days on Market</div>
                            <div class="stat-value">${data.insights.marketStats.daysOnMarket}</div>
                        </div>
                        <div class="insight-stat">
                            <div class="stat-label">Sale Volume</div>
                            <div class="stat-value">${data.insights.marketStats.saleVolume}</div>
                        </div>
                        <div class="insight-stat">
                            <div class="stat-label">Rental Yield</div>
                            <div class="stat-value">${data.insights.marketStats.rentalYield}</div>
                        </div>
                        <div class="insight-stat">
                            <div class="stat-label">Vacancy Rate</div>
                            <div class="stat-value">${data.insights.marketStats.vacancyRate}</div>
                        </div>
                    </div>
                    <div class="mt-4">
                        <canvas id="priceChart" class="insight-chart"></canvas>
                    </div>
                `);
                
                // Update chart data
                window.chartData = data.marketTrends.medianValues;
            }
            
            function updateComparables(comparables) {
                const comparablesSection = $('#comparables');
                const comparablesHtml = comparables.map(comp => `
                    <div class="comparable-item">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <strong>${comp.address}</strong><br>
                                <span class="text-muted">${comp.bedrooms} bed, ${comp.bathrooms} bath, ${comp.carSpaces} car</span><br>
                                <small class="text-muted">Distance: ${comp.distance} | Similarity: ${comp.similarity}</small>
                            </div>
                            <div class="text-end">
                                <strong class="text-success">${window.PropertyAPI.formatCurrency(comp.soldPrice)}</strong><br>
                                <small class="text-muted">Sold ${new Date(comp.soldDate).toLocaleDateString()}</small>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                comparablesSection.find('.card').html(`
                    <h5 class="section-title">Recent Comparable Sales</h5>
                    ${comparablesHtml}
                `);
            }
            
            function updateSchools(schools) {
                const schoolsSection = $('#schools');
                const schoolsHtml = schools.map(school => `
                    <div class="school-item">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <strong>${school.name}</strong>
                                <span class="school-rating ms-2">${school.rating}/5</span><br>
                                <span class="text-muted">${school.type} School | ${school.grades}</span><br>
                                <small class="text-muted">${school.students} students | ${school.sectors.join(', ')}</small>
                            </div>
                            <div class="text-end">
                                <span class="badge bg-light text-dark">${school.distance}</span>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                schoolsSection.find('.card').html(`
                    <h5 class="section-title">Local Schools</h5>
                    ${schoolsHtml}
                `);
            }
        }
    </script>
</body>
</html>
